<div>
  <p-table
    [value]="projects"
    rowGroupMode="subheader"
    groupRowsBy="projectName"
    sortField="projectName"
    sortMode="single"
    (onSort)="onSort()"
    responsiveLayout="scroll"
    [scrollable]="true"
    scrollHeight="450px"
  >
    <ng-template pTemplate="header">
      <tr>
        <th *ngFor="let col of cols" class="bg-gray-100">
          {{ col.header }}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product let-rowIndex="rowIndex">
      <tr
        pRowGroupHeader
        *ngIf="rowGroupMetadata[product.projectName].index === rowIndex"
        style="top: 46px"
      >
        <td colspan="6" style="min-width: 200px">
          <img
            [alt]="product.logo"
            [src]="'assets/demo/images/avatar/' + product.projectLogo"
            width="42"
            style="vertical-align: middle"
          />
          <span class="font-bold ml-2">{{ product.projectName }}</span>
        </td>
        <td colspan="2">
          <span class="flex gap-2 white-space-nowrap"
            ><p class="font-bold">Tiempo estimado:</p>
            <p>{{ product.totalEstimatedTime }}</p>
          </span>
        </td>
      </tr>

      <tr *ngFor="let task of product.tasks">
        <td style="min-width: 50px">#{{ task.id }}</td>
        <td style="min-width: 100px">
          {{ task.name }}
        </td>
        <td style="min-width: 50px">
          <app-status-chip [status]="task.status"></app-status-chip>
        </td>
        <td style="min-width: 200px">
          {{ task.description }}
        </td>
        <td style="min-width: 150px">
          {{ task.startDate }}
        </td>
        <td style="min-width: 150px">
          {{ task.endDate }}
        </td>
        <td style="min-width: 150px">
          {{ task.estimatedTime }}
        </td>
        <td style="min-width: 200px">
          {{ task.evaluation }}
        </td>
      </tr>
    </ng-template>
  </p-table>
  <div class="flex justify-content-end align-items-center gap-2 mt-4">
    <p class="font-bold text-lg m-0">Tiempo total:</p>
    <p class="font-medium m-0">{{ total }} horas</p>
  </div>
</div>
